<!DOCTYPE html>
<html>
<head>
  <title>Enhanced Test Canvas</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 40px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    .status-panel {
      background: rgba(0, 0, 0, 0.2);
      padding: 25px;
      border-radius: 12px;
      margin: 25px 0;
      border-left: 5px solid #4CAF50;
    }
    .system-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    .system-card {
      background: rgba(255, 255, 255, 0.15);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      transition: transform 0.3s;
    }
    .system-card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.2);
    }
    .system-card h3 {
      margin-top: 0;
      color: #4CAF50;
    }
    button {
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px;
      transition: all 0.3s;
      font-weight: bold;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    .counter-display {
      font-size: 64px;
      text-align: center;
      margin: 40px 0;
      font-weight: bold;
      text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
    }
    .test-results {
      margin-top: 40px;
      padding: 25px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      max-height: 300px;
      overflow-y: auto;
    }
    .test-results h3 {
      margin-top: 0;
      color: #4CAF50;
    }
    #results {
      list-style: none;
      padding: 0;
    }
    #results li {
      padding: 10px;
      margin: 5px 0;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      border-left: 4px solid #4CAF50;
    }
    .timestamp {
      font-size: 0.9em;
      color: rgba(255, 255, 255, 0.7);
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš€ Bit Agent System Test Dashboard</h1>
    
    <div class="status-panel">
      <h2>System Status</h2>
      <p><strong>ğŸ•’ Current Time:</strong> <span id="time">Loading...</span></p>
      <p><strong>ğŸŒ User Agent:</strong> <span id="user-agent"></span></p>
      <p><strong>ğŸ“Š Canvas Loaded:</strong> âœ… Successfully</p>
    </div>
    
    <div class="system-grid">
      <div class="system-card">
        <h3>ğŸ“ File Manager</h3>
        <p>âœ“ Read/Write Operations</p>
        <p>âœ“ File System Access</p>
      </div>
      <div class="system-card">
        <h3>ğŸ Python</h3>
        <p>âœ“ Code Execution</p>
        <p>âœ“ Package Installation</p>
      </div>
      <div class="system-card">
        <h3>âš¡ JavaScript</h3>
        <p>âœ“ Node.js Runtime</p>
        <p>âœ“ File System Access</p>
      </div>
      <div class="system-card">
        <h3>ğŸ” Web Tools</h3>
        <p>âœ“ Search & Browse</p>
        <p>âœ“ Content Extraction</p>
      </div>
      <div class="system-card">
        <h3>ğŸ’¾ Memory</h3>
        <p>âœ“ Persistent Storage</p>
        <p>âœ“ Search & Recall</p>
      </div>
      <div class="system-card">
        <h3>ğŸ¨ Canvas</h3>
        <p>âœ“ Interactive UI</p>
        <p>âœ“ Hot Reload</p>
      </div>
    </div>
    
    <div class="counter-display">
      <span id="count">0</span>
    </div>
    
    <div style="text-align: center;">
      <button onclick="increment()">â• Increment Counter</button>
      <button onclick="decrement()">â– Decrement Counter</button>
      <button onclick="reset()">ğŸ”„ Reset Counter</button>
      <button onclick="sendTestAction()">ğŸ“¤ Send Test Action</button>
      <button onclick="simulateError()">âš ï¸ Simulate Error</button>
    </div>
    
    <div class="test-results">
      <h3>Live Test Results</h3>
      <ul id="results">
        <li>âœ… Canvas loaded successfully <span class="timestamp" id="load-time"></span></li>
        <li>âœ… JavaScript execution working</li>
        <li>âœ… DOM manipulation functional</li>
      </ul>
    </div>
  </div>

  <script>
    // Initialize
    let count = 0;
    const countElement = document.getElementById('count');
    const resultsElement = document.getElementById('results');
    const loadTimeElement = document.getElementById('load-time');
    
    // Set load time
    loadTimeElement.textContent = new Date().toLocaleTimeString();
    
    // Update time display
    function updateTime() {
      const now = new Date();
      document.getElementById('time').textContent = now.toLocaleString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true
      });
    }
    
    // Show user agent
    document.getElementById('user-agent').textContent = navigator.userAgent;
    
    // Counter functions
    function increment() {
      count++;
      updateCounter();
      addResult(`âœ… Counter incremented to ${count}`);
    }
    
    function decrement() {
      if (count > 0) {
        count--;
        updateCounter();
        addResult(`âœ… Counter decremented to ${count}`);
      } else {
        addResult(`âš ï¸ Counter already at minimum (0)`);
      }
    }
    
    function reset() {
      count = 0;
      updateCounter();
      addResult(`ğŸ”„ Counter reset to 0`);
    }
    
    function updateCounter() {
      countElement.textContent = count;
      // Add visual feedback
      countElement.style.transform = 'scale(1.2)';
      setTimeout(() => {
        countElement.style.transform = 'scale(1)';
      }, 200);
    }
    
    // Send action to agent
    function sendTestAction() {
      if (typeof canvasSendAction === 'function') {
        const actionData = {
          type: 'test_action',
          message: 'Interactive test from canvas',
          timestamp: new Date().toISOString(),
          count: count,
          userAgent: navigator.userAgent
        };
        canvasSendAction(actionData);
        addResult(`ğŸ“¤ Test action sent: ${JSON.stringify(actionData)}`);
      } else {
        addResult('âš ï¸ canvasSendAction function not available');
      }
    }
    
    // Simulate error for testing
    function simulateError() {
      try {
        throw new Error('This is a simulated error for testing purposes');
      } catch (error) {
        addResult(`âš ï¸ Simulated error: ${error.message}`);
      }
    }
    
    // Add result to list
    function addResult(message) {
      const li = document.createElement('li');
      const timestamp = new Date().toLocaleTimeString();
      li.innerHTML = `${message} <span class="timestamp">${timestamp}</span>`;
      resultsElement.appendChild(li);
      
      // Scroll to bottom
      resultsElement.scrollTop = resultsElement.scrollHeight;
      
      // Limit results to 20 items
      if (resultsElement.children.length > 20) {
        resultsElement.removeChild(resultsElement.children[0]);
      }
    }
    
    // Initialize
    updateTime();
    setInterval(updateTime, 1000);
    
    // Listen for state changes from agent
    window.addEventListener('canvas:state-change', (e) => {
      console.log('State changed from agent:', e.detail);
      addResult(`ğŸ“¥ Received state change: ${JSON.stringify(e.detail)}`);
    });
    
    // Add initial test results
    addResult('âœ… Canvas initialization complete');
    addResult('âœ… Event listeners registered');
    addResult('âœ… Ready for interactive testing');
  </script>
</body>
</html>